<?xml version="1.0" encoding="iso-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><title>3.12. Advanced Installation Guide</title><link rel="stylesheet" type="text/css" href="docbook.css" /><link rev="made" href="mailto:doc@FreeBSD.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="FreeBSD Handbook" /><link rel="up" href="install.html" title="Chapter 3. Installing FreeBSD 8.X" /><link rel="prev" href="install-trouble.html" title="3.11. Troubleshooting" /><link rel="next" href="install-diff-media.html" title="3.13. Preparing Custom Installation Media" /><link rel="copyright" href="legalnotice.html" title="Copyright" /><script xmlns="" type="text/javascript" src="../../layout/js/google.js"></script></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">3.12. Advanced Installation Guide</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="install-trouble.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Installing FreeBSD 8.<em class="replaceable"><code>X</code></em></th><td width="20%" align="right"> <a accesskey="n" href="install-diff-media.html">Next</a></td></tr></table><hr /></div><div class="sect1"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="install-advanced"></a>3.12. Advanced Installation Guide</h2></div><div><span class="authorgroup">Contributed
	  by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Valentino</span> <span class="surname">Vaschetto</span></span>. </span></div><div><span class="authorgroup">Updated
	  by <span xmlns="http://www.w3.org/1999/xhtml" class="author"><span class="firstname">Marc</span> <span class="surname">Fonvieille</span></span>. </span></div></div></div><p>This section describes how to install FreeBSD in exceptional
      cases.</p><div class="sect2"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="headless-install"></a>3.12.1. Installing FreeBSD on a System Without a Monitor or
	Keyboard</h3></div></div></div><a id="idp61107744" class="indexterm"></a><a id="idp61108896" class="indexterm"></a><p>This type of installation is called a <span class="quote">&#8220;<span class="quote">headless
	  install</span>&#8221;</span> because the machine to be installed does not
	have either an attached monitor or a VGA output.  This type of
	installation is possible using a serial console, another
	machine which acts as the main display and keyboard.  To do
	this, follow the steps to create an installation USB stick,
	explained in <a class="xref" href="install-pre.html#install-boot-media" title="3.3.7. Prepare the Boot Media">Section 3.3.7, &#8220;Prepare the Boot Media&#8221;</a>, or download
	the correct installation ISO image as described in <a class="xref" href="install-diff-media.html#install-cdrom" title="3.13.1. Creating an Installation ISO">Section 3.13.1, &#8220;Creating an Installation ISO&#8221;</a>.</p><p>To modify the installation media to boot into a serial
	console, follow these steps.  If using a CD/DVD media, skip
	the first step):</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p class="title"><strong>Enabling the Installation USB Stick to Boot into a
	    Serial Console</strong></p><a id="idp61112224" class="indexterm"></a><p>By default, booting into the USB stick boots into the
	    installer.  To instead boot into a serial console, mount
	    the USB disk onto a FreeBSD system using
	    <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mount</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mount /dev/<em class="replaceable"><code>da0a</code></em> <em class="replaceable"><code>/mnt</code></em></code></strong></pre><div xmlns="" class="note"><h3 class="admontitle">Note: </h3><p xmlns="http://www.w3.org/1999/xhtml">Adapt the device node and the mount point to the
	      situation.</p></div><p>Once the USB stick is mounted, set it to boot into a
	    serial console.  Add this line to
	    <code class="filename">/boot/loader.conf</code> on the USB
	    stick:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'console="comconsole"' &gt;&gt; <em class="replaceable"><code>/mnt</code></em>/boot/loader.conf</code></strong></pre><p>Now that the USB is stick configured correctly,
	    unmount the disk using <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=umount&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">umount</span>(8)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>umount <em class="replaceable"><code>/mnt</code></em></code></strong></pre><p>Now, unplug the USB stick and jump directly to the
	    third step of this procedure.</p></li><li class="step"><p class="title"><strong>Enabling the Installation CD/DVD to Boot into a
	    Serial Console</strong></p><a id="idp61130912" class="indexterm"></a><p>By default, when booting into the installation CD/DVD,
	    FreeBSD boots into its normal install mode.  To instead boot
	    into a serial console, extract, modify, and regenerate the
	    ISO image before burning it to the CD/DVD media.</p><p>From the FreeBSD system with the saved installation ISO
	    image, use <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=tar&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">tar</span>(1)</span></a> to extract all the files:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkdir <em class="replaceable"><code>/path/to/headless-iso</code></em></code></strong>
<code class="prompt">#</code> <strong class="userinput"><code>tar -C <em class="replaceable"><code>/path/to/headless-iso</code></em> -pxvf FreeBSD-<em class="replaceable"><code>10.0</code></em>-RELEASE-<em class="replaceable"><code>i386</code></em>-disc1.iso</code></strong></pre><p>Next, set the installation media to boot into a
	    serial console.  Add this line to the
	    <code class="filename">/boot/loader.conf</code> of the extracted
	    ISO image:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>echo 'console="comconsole"' &gt;&gt; <em class="replaceable"><code>/path/to/headless-iso</code></em>/boot/loader.conf</code></strong></pre><p>Then, create a new ISO image from the modified tree.
	    This example uses <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=mkisofs&amp;sektion=8"><span class="citerefentry"><span class="refentrytitle">mkisofs</span>(8)</span></a> from the
	    <a xmlns="" class="package" href="http://www.freebsd.org/cgi/url.cgi?ports/sysutils/cdrtools/pkg-descr">sysutils/cdrtools</a> package or
	    port:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>mkisofs -v -b boot/cdboot -no-emul-boot -r -J -V "<em class="replaceable"><code>Headless_install</code></em>" \
	    -o <em class="replaceable"><code>Headless-</code></em>FreeBSD-<em class="replaceable"><code>9.3</code></em>-RELEASE-<em class="replaceable"><code>i386</code></em>-disc1.iso<em class="replaceable"><code>/path/to/headless-iso</code></em></code></strong></pre><p>Now that the ISO image is configured correctly, burn
	    it to a CD/DVD media using a burning application.</p></li><li class="step"><p class="title"><strong>Connecting the Null-modem Cable</strong></p><a id="idp61152672" class="indexterm"></a><p>Connect a <a class="link" href="serial.html#term-cables-null" title="26.2.1. Serial Cables and Ports">null-modem cable</a> to
	    the serial ports of the two machines.  <span class="emphasis"><em>A
	    normal serial cable will not work</em></span>.  A
	    null-modem cable is required.</p></li><li class="step"><p class="title"><strong>Booting Up for the Install</strong></p><p>It is now time to go ahead and start the install.
	    Plug in the USB stick or insert the CD/DVD media in the
	    headless install machine and power it on.</p></li><li class="step"><p class="title"><strong>Connecting to the Headless Machine</strong></p><a id="idp61156512" class="indexterm"></a><p>Next, connect to that machine with <a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>:</p><pre class="screen"><code class="prompt">#</code> <strong class="userinput"><code>cu -l /dev/cuau0</code></strong></pre></li></ol></div><p>The headless machine can now be controlled using
	<a class="citerefentry" href="http://www.FreeBSD.org/cgi/man.cgi?query=cu&amp;sektion=1"><span class="citerefentry"><span class="refentrytitle">cu</span>(1)</span></a>.  It will load the kernel and then display a
	selection of which type of terminal to use.  Select the FreeBSD
	color console and proceed with the installation.</p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="install-trouble.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="install.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="install-diff-media.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3.11. Troubleshooting </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3.13. Preparing Custom Installation Media</td></tr></table></div><p xmlns="" align="center"><small>All FreeBSD documents are available for download
    at <a href="http://ftp.FreeBSD.org/pub/FreeBSD/doc/">http://ftp.FreeBSD.org/pub/FreeBSD/doc/</a></small></p><p xmlns="" align="center"><small>Questions that are not answered by the
    <a href="http://www.FreeBSD.org/docs.html">documentation</a> may be
    sent to &lt;<a href="mailto:freebsd-questions@FreeBSD.org">freebsd-questions@FreeBSD.org</a>&gt;.<br />
    Send questions about this document to &lt;<a href="mailto:freebsd-doc@FreeBSD.org">freebsd-doc@FreeBSD.org</a>&gt;.</small></p></body></html>